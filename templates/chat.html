{% extends "layout.html" %}
{% block title %} Novage {% endblock %}
{% block logo %}<link rel="icon" type="image/png" sizes="16x16" href="assets/images/logo2.png">{% endblock %}
{%block page_active1 %}active{% endblock %}
{%block page_current1 %}<span class="sr-only">(current)</span>{% endblock %}

{% block content %}
<div>
  {% block bar %}
<section class="grids-1 py-5">


<div class="card text-white border-0 overflow-hidden">
    <img class="card-img" src="static/assets/images/backgrounds/img-1.png" alt="Card image">
    <span class="mask bg-primary alpha-7"></span>
    <div class="card-img-overlay d-flex align-items-center">
        <div class="col-lg-8">
<h1>Chat avec moi</h1>
    <form action="/chat" method="post">
        <div class="input-group mb-3">
        <input type="text" id="input" name="input" class="form-control" placeholder="Saisir vos question" aria-label="Recipient's username" aria-describedby="basic-addon2">
        <div class="input-group-append">
            <button class="btn btn-primary" type="submit">Button</button>
        </div>
    </div>
    </form>
    <h2>Réponse：</h2>
    <p id="answer"></p>
        </div>
    </div>
</div>



    <script>
        // 监听表单提交事件
        document.querySelector('form').addEventListener('submit', async (event) => {
            event.preventDefault(); // 阻止表单提交

            const input = document.querySelector('#input').value; // 获取用户输入的值
            const response = await fetch('/chat', {
                method: 'post',
                body: new FormData(event.target)
            });

            const data = await response.json(); // 解析响应的 JSON 数据
            document.querySelector('#answer').textContent = data.answer; // 更新页面上的回答
        });
    </script>
    {% endblock %}
</section>
</div>

{% endblock %}